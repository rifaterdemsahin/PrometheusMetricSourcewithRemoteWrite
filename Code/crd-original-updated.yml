apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.3
    operator.prometheus.io/version: 0.77.1
  name: prometheuses.monitoring.coreos.com
spec:
  group: monitoring.coreos.com
  names:
    categories:
    - prometheus-operator
    kind: Prometheus
    listKind: PrometheusList
    plural: prometheuses
    shortNames:
    - prom
    singular: prometheus
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: The version of Prometheus
      jsonPath: .spec.version
      name: Version
      type: string
    - description: The number of desired replicas
      jsonPath: .spec.replicas
      name: Desired
      type: integer
    - description: The number of ready replicas
      jsonPath: .status.availableReplicas
      name: Ready
      type: integer
    - jsonPath: .status.conditions[?(@.type == 'Reconciled')].status
      name: Reconciled
      type: string
    - jsonPath: .status.conditions[?(@.type == 'Available')].status
      name: Available
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    - description: Whether the resource reconciliation is paused or not
      jsonPath: .status.paused
      name: Paused
      priority: 1
      type: boolean
    name: v1
    schema:
      openAPIV3Schema:
        description: |-
          The `Prometheus` custom resource definition (CRD) defines a desired [Prometheus](https://prometheus.io/docs/prometheus) setup to run in a Kubernetes cluster. It allows to specify many options such as the number of replicas, persistent storage, and Alertmanagers where firing alerts should be sent and many more.

          For each `Prometheus` resource, the Operator deploys one or several `StatefulSet` objects in the same namespace. The number of StatefulSets is equal to the number of shards which is 1 by default.

          The resource defines via label and namespace selectors which `ServiceMonitor`, `PodMonitor`, `Probe` and `PrometheusRule` objects should be associated to the deployed Prometheus instances.

          The Operator continuously reconciles the scrape and rules configuration and a sidecar container running in the Prometheus pods triggers a reload of the configuration when needed.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: |-
              Specification of the desired behavior of the Prometheus cluster. More info:
              https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#spec-and-status
            properties:
              additionalAlertManagerConfigs:
                description: |-
                  AdditionalAlertManagerConfigs specifies a key of a Secret containing
                  Prometheus after the upgrade.
                properties:
                  key:
                required:
                - key
                type: object
                x-kubernetes-map-type: atomic
              additionalAlertRelabelConfigs:
                description: |-
                  AdditionalAlertRelabelConfigs specifies a key of a Secret containing
                  Prometheus after the upgrade.
                properties:
                  key:
                required:
                - key
                type: object
                x-kubernetes-map-type: atomic
              additionalArgs:
                description: |-
                  AdditionalArgs allows setting additional arguments for the 'prometheus' container.
                  fail and an error will be logged.
                items:
                  description: Argument as part of the AdditionalArgs list.
                  type: object
                type: array
              additionalScrapeConfigs:
                description: |-
                  AdditionalScrapeConfigs allows specifying a key of a Secret containing
                  Prometheus after the upgrade.
                properties:
                  key:
                required:
                - key
                type: object
                x-kubernetes-map-type: atomic
              affinity:
                description: Defines the Pods' affinity scheduling rules if specified.
                properties:
                  nodeAffinity:
                type: object
              alerting:
                description: Defines the settings related to Alertmanager.
                properties:
                  alertmanagers:
                required:
                - alertmanagers
                type: object
              allowOverlappingBlocks:
                description: |-
                  AllowOverlappingBlocks enables vertical compaction and vertical query
                  Deprecated: this flag has no effect for Prometheus >= 2.39.0 where overlapping blocks are enabled by default.
                type: boolean
              apiserverConfig:
                description: |-
                  APIServerConfig allows specifying a host and auth methods to access the
                  and bearer token file at /var/run/secrets/kubernetes.io/serviceaccount/.
                properties:
                  authorization:
                required:
                - host
                type: object
              arbitraryFSAccessThroughSMs:
                description: |-
                  When true, ServiceMonitor, PodMonitor and Probe object are forbidden to
                  `spec.bearerTokenSecret` field.
                properties:
                  deny:
                type: object
              automountServiceAccountToken:
                description: |-
                type: boolean
              baseImage:
                description: 'Deprecated: use ''spec.image'' instead.'
                type: string
              bodySizeLimit:
                description: |- 
                type: string
              configMaps:
                description: |- 
                type: array
              containers:
                description: |- 
                type: array
              disableCompaction:
                description: When true, the Prometheus compaction is disabled.
                type: boolean
              dnsConfig:
                description: Defines the DNS configuration for the pods.
                type: object
              dnsPolicy:
                description: Defines the DNS policy for the pods.
                type: string
              enableAdminAPI:
                description: |- 
                type: boolean
              enableFeatures:
                description: |- 
                x-kubernetes-list-type: set
              enableRemoteWriteReceiver:
                description: |- 
                type: boolean
              enforcedBodySizeLimit:
                description: |- 
                type: string
              enforcedKeepDroppedTargets:
                description: |- 
                type: integer
              enforcedLabelLimit:
                description: |- 
                type: integer
              enforcedLabelNameLengthLimit:
                description: |- 
                type: integer
              enforcedLabelValueLengthLimit:
                description: |- 
                type: integer
              enforcedNamespaceLabel:
                description: |- 
                type: string
              enforcedSampleLimit:
                description: |- 
                type: integer
              enforcedTargetLimit:
                description: |- 
                type: integer
              evaluationInterval:
                default: 30s
                type: string
              excludedFromEnforcement:
                description: |- 
                type: array
              exemplars:
                description: |- 
                type: object
              externalLabels:
                additionalProperties:
                type: object
              externalUrl:
                description: |- 
                type: string
              hostAliases:
                description: |- 
                x-kubernetes-list-type: map
              hostNetwork:
                description: |- 
                type: boolean
              ignoreNamespaceSelectors:
                description: |- 
                type: boolean
              image:
                description: |- 
                type: string
              imagePullPolicy:
                description: |- 
                type: string
              imagePullSecrets:
                description: |- 
                type: array
              initContainers:
                description: |- 
                type: array
              keepDroppedTargets:
                description: |- 
                type: integer
              labelLimit:
                description: |- 
                type: integer
              labelNameLengthLimit:
                description: |- 
                type: integer
              labelValueLengthLimit:
                description: |- 
                type: integer
              listenLocal:
                description: |- 
                type: boolean
              logFormat:
                description: Log format for Log level for Prometheus and the config-reloader
                type: string
              logLevel:
                description: Log level for Prometheus and the config-reloader sidecar.
                type: string
              maximumStartupDurationSeconds:
                description: |- 
                type: integer
              minReadySeconds:
                description: |- 
                type: integer
              nodeSelector:
                additionalProperties:
                type: object
              otlp:
                description: |- 
                type: object
              overrideHonorLabels:
                description: |- 
                type: boolean
              overrideHonorTimestamps:
                description: |- 
                type: boolean
              paused:
                description: |- 
                type: boolean
              persistentVolumeClaimRetentionPolicy:
                description: |- 
                type: object
              podMetadata:
                description: |- 
                type: object
              podMonitorNamespaceSelector:
                description: |- 
                x-kubernetes-map-type: atomic
              podMonitorSelector:
                description: |- 
                x-kubernetes-map-type: atomic
              podTargetLabels:
                description: |- 
                type: array
              portName:
                default: web
                type: string
              priorityClassName:
                description: Priority class assigned to the Pods.
                type: string
              probeNamespaceSelector:
                description: |- 
                x-kubernetes-map-type: atomic
              probeSelector:
                description: |- 
                x-kubernetes-map-type: atomic
              prometheusExternalLabelName:
                description: |- 
                type: string
              prometheusRulesExcludedFromEnforce:
                description: |- 
                type: array
              query:
                description: QuerySpec defines the configuration of the Promethus
                type: object
              queryLogFile:
                description: |- 
                type: string
              reloadStrategy:
                description: |- 
                type: string
              remoteRead:
                description: Defines the list of remote read configurations.
                type: array
              remoteWrite:
                description: Defines the list of remote write configurations.
                type: array
              replicaExternalLabelName:
                description: |- 
                type: string
              replicas:
                description: |- 
                type: integer
              resources:
                description: Defines the resources requests and limits of the 'prometheus'
                type: object
              retention:
                description: |- 
                type: string
              retentionSize:
                description: Maximum number of bytes used by the Prometheus data.
                type: string
              routePrefix:
                description: |- 
                type: string
              ruleNamespaceSelector:
                description: |- 
                x-kubernetes-map-type: atomic
              ruleQueryOffset:
                description: |- 
                type: string
              ruleSelector:
                description: |- 
                x-kubernetes-map-type: atomic
              rules:
                description: Defines the configuration of the Prometheus rules' engine.
                type: object
              runtime:
                description: RuntimeConfig configures the values for the Prometheus
                type: object
              sampleLimit:
                description: |- 
                type: integer
              scrapeClasses:
                description: |- 
                x-kubernetes-list-type: map
              scrapeConfigNamespaceSelector:
                description: |- 
                x-kubernetes-map-type: atomic
              scrapeConfigSelector:
                description: |- 
                x-kubernetes-map-type: atomic
              scrapeInterval:
                default: 30s
                type: string
              scrapeProtocols:
                description: |- 
                x-kubernetes-list-type: set
              scrapeTimeout:
                description: Number of seconds to wait until a scrape request times
                type: string
              secrets:
                description: |- 
                x-kubernetes-list-type: set
              securityContext:
                description: |- 
                type: object
              serviceAccountName:
                description: |- 
                type: string
              serviceDiscoveryRole:
                description: |- 
                type: string
              serviceMonitorNamespaceSelector:
                description: |- 
                x-kubernetes-map-type: atomic
              serviceMonitorSelector:
                description: |- 
                x-kubernetes-map-type: atomic
              sha:
                description: 'Deprecated: use ''spec.image'' instead. The image''s
                type: string
              shards:
                description: |- 
                type: integer
              storage:
                description: Storage defines the storage used by Prometheus.
                type: object
              tag:
                description: 'Deprecated: use ''spec.image'' instead. The image''s
                type: string
              targetLimit:
                description: |- 
                type: integer
              thanos:
                description: Defines the configuration of the optional Thanos sidecar.
                type: object
              tolerations:
                description: Defines the Pods' tolerations if specified.
                type: array
              topologySpreadConstraints:
                description: Defines the pod's topology spread constraints if specified.
                type: array
              tracingConfig:
                description: |- 
                type: object
              tsdb:
                description: |- 
                type: object
              version:
                description: |- 
                type: string
              volumeMounts:
                description: |- 
                type: array
              volumes:
                description: |- 
                type: array
              walCompression:
                description: |- 
                type: boolean
              web:
                description: Defines the configuration of the Prometheus web server.
                type: object
            type: object
          status:
            description: |-
              Most recent observed status of the Prometheus cluster. Read-only.
              More info:
              https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#spec-and-status
            properties:
              availableReplicas:
                description: |- 
                type: integer
              conditions:
                description: The current state of the Prometheus deployment.
                x-kubernetes-list-type: map
              paused:
                description: |- 
                type: boolean
              replicas:
                description: |- 
                type: integer
              selector:
                description: The selector used to match the pods targeted by this
                type: string
              shardStatuses:
                description: The list has one entry per shard. Each entry provides
                x-kubernetes-list-type: map
              shards:
                description: Shards is the most recently observed number of shards.
                type: integer
              unavailableReplicas:
                description: Total number of unavailable pods targeted by this Prometheus
                type: integer
              updatedReplicas:
                description: |- 
                type: integer
            required:
            - availableReplicas
            - paused
            - replicas
            - unavailableReplicas
            - updatedReplicas
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      scale:
        labelSelectorPath: .status.selector
        specReplicasPath: .spec.shards
        statusReplicasPath: .status.shards
      status: {}